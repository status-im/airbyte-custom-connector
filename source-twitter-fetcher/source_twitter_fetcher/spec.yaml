documentationUrl: https://docsurl.com
connectionSpecification:
  $schema: http://json-schema.org/draft-07/schema#
  title: Twitter Fetcher
  type: object
  description: |
    Twitter Fetcher connector uses two authentication methods:

    1. **Bearer Token Authentication** for public data streams:
       - TagsStream: Search public tweets by hashtags/mentions
       - GetSpaceIds: Discover public spaces by creator accounts
       - Requires: bearer_token (from Twitter Developer Portal > Keys and tokens)

    2. **User Authentication (OAuth 2.0)** for user-context streams:
       - Account, Tweet, TweetMetrics, TweetComments, Space streams
       - Requires: client_id, client_secret, access_token, refresh_token, account_id
  required:
    - credentials
  properties:
    credentials:
      title: Twitter Dev account Credentials
      type: object
      required:
        - client_id
        - client_secret
        - bearer_token
      properties:
        client_id:
          title: Client ID
          type: string
          description: "Client ID of your Twitter Application (required for all streams)"
          airbyte_secret: true
        client_secret:
          title: Client Secret
          type: string
          description: "Client Secret of your Twitter Application (required for all streams)"
          airbyte_secret: true
        bearer_token:
          title: Bearer Token
          type: string
          description: "Bearer Token from Twitter Developer Portal > Keys and tokens (required for tags and space discovery streams)"
          airbyte_secret: true
        access_token:
          title: Access Token
          type: string
          description: "User Access Token (required only for user-context streams: Account, Tweet, TweetMetrics, TweetComments, Space)"
          airbyte_secret: true
        refresh_token:
          title: Refresh Token
          type: string
          description: "Refresh Token for renewing the Access Token (required only for user-context streams)"
          airbyte_secret: true
        token_expiry_date:
          title: Token Expiry Date
          type: string
          description: "Expiry date of the Access Token (optional)"
    account_id:
      type: string
      title: "Account ID"
      description: "Twitter User ID to fetch account-specific data from (required for user-context streams: Account, Tweet, TweetMetrics, TweetComments)"
    start_time:
      type:         string
      description:  "Start date of fetching data. If not provided, defaults to 5 days before current time."
      format:       datetime
    tags:
      type: array
      title: "Tags to Monitor"
      description: "List of hashtags, mentions, or search terms to monitor (e.g., ['#bitcoin', '@elonmusk', 'artificial intelligence']). Uses app-only authentication for public tweet search."
      items:
        type: string
      minItems: 0
    tags_frequent_extractions:
      type: boolean
      title: "Tags Frequent Extractions"
      description: "If true, defaults start_time to 1 hour 15 minutes before current time for more frequent extractions. If false, defaults to 5 days before current time."
      default: false
    space_ids:
      type: array
      title: "Space IDs"
      description: "List of Twitter Space IDs to fetch (e.g., ['1eaKbjbeejvKX', '1SLjjRYNejbKM']). If not provided, no spaces will be fetched."
      items:
        type: string
      minItems: 0
    space_account:
      type: array
      title: "Space Account IDs"
      description: "List of Twitter User IDs to discover spaces from (e.g., ['123456789', '987654321']). Uses app-only authentication to fetch public spaces created by these accounts. If not provided, no space discovery will be performed."
      items:
        type: string
      minItems: 0
